<!doctype html>
<html ng-app="myApp">
  <head>
    <meta charset="utf-8">

    <!-- Always force latest IE rendering engine or request Chrome Frame -->
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">

    <!-- Use title if it's in the page YAML frontmatter -->
    <title><%= current_page.data.title || "The Middleman" %></title>

    <%= stylesheet_link_tag "normalize", "all" %>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.0/angular.min.js"></script>
    <%= javascript_include_tag  "all" %>
    <script>
      var myApp = angular.module('myApp', []);
var api = 'https://api.pinterest.com/v3/pidgets/boards/ilandychiu/ci/pins/';

/* function 名稱小寫開頭會出錯 */
var MyController = function($scope, $http) {
  $scope.pins = [];
  $http.jsonp(api + '?callback=JSON_CALLBACK').success(function (data) {
     $scope.pins = data.data.pins;
  }).error(function (data, status, headers, config) {
     console.log('error');
  });
};

/* 相依性注入：支援最小化 js 檔案 */
MyController.$inject = ['$scope', '$http'];
myApp.controller('MyController', MyController);
    </script>
  </head>

  <body ng-controller="MyController" class="<%= page_classes %>">
    <%= yield %>
    
  </body>
</html>
